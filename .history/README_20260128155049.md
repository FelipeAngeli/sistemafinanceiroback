# Sistema de Gestão para Psicóloga

Backend Python seguindo **Clean Architecture** para gerenciamento de pacientes, sessões e lançamentos financeiros.

## Arquitetura

```
app/
├── core/           # Configurações, logger, exceções comuns
├── domain/         # Entidades e regras de negócio puras
│   ├── entities/   # Patient, Session, FinancialEntry
│   └── repositories/  # Interfaces (ports)
├── use_cases/      # Casos de uso (application layer)
│   ├── patient/
│   ├── session/
│   └── financial/
├── infra/          # Implementações concretas
│   ├── database/
│   └── repositories/
└── interfaces/     # Controllers HTTP (adapters)
    └── http/
```

## Funcionalidades

- **Pacientes**: CRUD completo
- **Sessões**: Agendar, concluir, cancelar
- **Financeiro**: Lançamentos automáticos ao concluir sessão

### Regra de Negócio Principal
> Quando uma sessão é **concluída**, o sistema gera automaticamente um **lançamento financeiro pendente**.

## Requisitos

- Python 3.11+
- Dependências: ver `requirements.txt`
- **Servidor de Produção**: Gunicorn com Uvicorn workers (já incluído)

## Setup

```bash
# Criar virtual environment
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# .venv\Scripts\activate   # Windows

# Instalar dependências
pip install -r requirements.txt

# Configurar variáveis de ambiente
cp .env.example .env
# Editar .env conforme necessário

# Rodar testes
pytest
```

## Deploy

### Render (Recomendado)

Deploy rápido e simples na plataforma Render. Veja a [documentação completa](docs/RENDER_DEPLOY.md).

**Passos rápidos:**
1. Conecte seu repositório no [Render Dashboard](https://dashboard.render.com)
2. Crie um **Web Service** com:
   - Build Command: `pip install -r requirements.txt`
   - Start Command: `gunicorn app.main:app -c gunicorn.conf.py`
3. Crie um **PostgreSQL** e configure `DATABASE_URL`
4. Deploy automático a cada push!

> **Nota**: O projeto usa **Gunicorn** com **Uvicorn workers** para produção (ASGI).

Ou use o arquivo `render.yaml` para configuração via Blueprint.

### Container (Docker)
```bash
docker build -t psychologist-system .
docker run -p 8000:8000 psychologist-system
```

### AWS Lambda
Usar Mangum como adapter para FastAPI. Veja [docs/AWS_DEPLOY.md](docs/AWS_DEPLOY.md).

## Próximos Passos

1. [x] Implementar lógica nas entidades do domínio
2. [x] Implementar casos de uso
3. [x] Implementar repositórios (SQLAlchemy/SQLite)
4. [ ] Implementar controllers FastAPI
5. [ ] Adicionar autenticação
6. [ ] Configurar CI/CD
